{% extends 'main/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<h2>Menu</h2>
<form method="GET" action="{% url 'menu' %}">
    <input type="text" name="q" placeholder="Search for items..." value="{{ request.GET.q }}">
    <button type="submit">Search</button>
</form>
<div id="menu-items">
    {% for item in menu_items %}
        <div class="menu-item">
            <h3>{{ item.name }}</h3>
            <p>{{ item.description }}</p>
            <p>${{ item.price }}</p>
            <a href="{% url 'add_to_cart' item.id %}"><button>Add to Cart</button></a>
        </div>
    {% endfor %}
</div>
<script>
    function searchMenu() {
        let input = document.querySelector('input[name="q"]').value.toLowerCase();
        let items = document.querySelectorAll('.menu-item');
        items.forEach(item => {
            let name = item.querySelector('h3').textContent.toLowerCase();
            if (name.includes(input)) {
                item.style.display = 'block';  // Or use item.classList.add('visible');
            } else {
                item.style.display = 'none';   // Or use item.classList.remove('visible');
            }
        });
    }
</script>
{% endblock %}
